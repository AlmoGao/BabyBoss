import{v as e,b as t,s,t as i,q as l}from"./index-30tzVDQE.js";import{_ as a}from"./index-B7umTcYS.js";import{_ as o}from"./index-CvmNd6Rs.js";import{_ as n}from"./Btn-BQ5zHeyl.js";import{_ as c}from"./ScrollView-DaG0IhIx.js";import{_ as d}from"./groups_setting-bLtMNASU.js";import{d as u,H as r,b as p,I as v,a1 as h,o as y,e as m,g as k,t as g,i as _,p as f,v as C,F as b,S as q,q as w,n as L,_ as x,$ as T,s as V,y as I,x as z,B as S,m as M,a as U,j as P,Y as j,l as E}from"./vue-DH2RNpQ3.js";import{I as D,p as H}from"./index-BWvB_AgY.js";const Q={class:"label"},R=(e=>(x("data-v-18678d6b"),e=e(),T(),e))((()=>k("iconpark-icon",{name:"signicon09"},null,-1))),A={class:"select_item_dialog"},O=["onClick"],B=t(u({__name:"SelectItem",props:{active:{type:[Number,String],default:""},options:{type:Array,default:()=>[]}},emits:["change"],setup(t,{emit:s}){const{t:i}=e.useI18n(),l=r(!1),a=s,o=t,n=p((()=>{const e=o.options.find((e=>e.value==o.active));return e?e.label:""})),c=e=>e.value==o.active,d=()=>{const e=!l.value;setTimeout((()=>{l.value=e}))},u=()=>{l.value=!1};return v((()=>{document.body.addEventListener("click",u)})),h((()=>{document.body.removeEventListener("click",u)})),(e,t)=>(y(),m("div",{class:"select_item",onClick:d},[k("span",Q,g(n.value||_(i)("select_please")),1),R,f(k("div",A,[(y(!0),m(b,null,q(o.options,((e,t)=>(y(),m("div",{onClick:w((t=>(e=>{l.value=!1,a("change",e.value)})(e)),["stop"]),class:L(["select_item_option",{avtive_option:c(e)}]),key:t},g((e=>e.label||"--")(e)),11,O)))),128))],512),[[C,l.value]])]))}}),[["__scopeId","data-v-18678d6b"]]),F=V({Input:null,page:1}),$=e=>(x("data-v-4ca9f6b9"),e=e(),T(),e),J={class:"shortcut_setting"},N={class:"section"},Y={class:"types"},G={class:"types_tabs"},K=["onClick"],W={class:"type_setting"},X={class:"add_section"},Z=$((()=>k("div",{class:"title"},"添加快捷语：",-1))),ee={class:"add_input"},te={class:"input"},se={class:"search_item"},ie={class:"list"},le={class:"table"},ae={class:"th"},oe={key:0,class:"line"},ne={class:"main_content"},ce=$((()=>k("div",{class:"line"},null,-1))),de=["onClick"],ue={key:4,style:{color:"brown"}},re={class:"submit_btn"},pe={class:"add_type_box"},ve={class:"content"},he={class:"add_type"},ye=$((()=>k("div",{class:"text"},"添加类别:",-1))),me={class:"input"},ke={class:"table"},ge={class:"th"},_e={key:0,class:"line"},fe={class:"main_content shorcut_list_td"},Ce=$((()=>k("div",{class:"line"},null,-1))),be={key:1},qe=["onClick"],we={class:"submit_btn"},Le=u({__name:"index",setup(t){const{t:u}=e.useI18n(),h=V({root:null,deviceID:2654917,requestid:null,todeviceid:2655337,shortCutTyptList:[],quickPhrasesList:[]}),{getShortcutCateMsg:C,getShortcutCatelist:w,getShortcutMsg:x,getShortcutlist:T,decodeContent:Q}=(e=>{const t=(t,s)=>{let i=e.root.lookupType(s);const l=new Uint8Array(t),a=i.decode(l);return i.toObject(a)},s=(t,s,i)=>{F.Input=e.root.lookupType("Input");const l={type:t,requestid:s,data:i},a=F.Input.verify(l);if(a)throw new Error(a);const o=F.Input.create(l);return F.Input.encode(o).finish()};return{...I(F),encodeInput:s,decodeContent:t,getShortcutCatelist:()=>{const t=e.root.lookupType("QuickPhrasesCListListReq");e.requestid++;const i=e.requestid,l={deviceid:e.deviceID,page:1,pagesize:200},a=t.verify(l);if(a)throw new Error(a);const o=t.encode(t.create(l)).finish(),n=s(23,i,o);D.sendMessageHandler(n)},getShortcutCateMsg:s=>{if(s.data){const i=t(s.data,"QuickPhrasesCListRsp");e.shortCutTyptList=i.quickphrasec,console.log("快捷语分类列表",e.shortCutTyptList)}},getShortcutlist:()=>{const t=e.root.lookupType("QuickPhrasesListReq");e.requestid++;const i=e.requestid,l={deviceid:e.deviceID,page:1,pagesize:200},a=t.verify(l);if(a)throw new Error(a);const o=t.encode(t.create(l)).finish(),n=s(19,i,o);D.sendMessageHandler(n)},getShortcutMsg:s=>{if(s.data){const i=t(s.data,"QuickPhrasesListRsp");e.quickPhrasesList=i.quickphrase,console.log("快捷语列表",e.quickPhrasesList)}},sendShortcutList:t=>{const i=e.root.lookupType("QuickPhrasesModifyReq");e.requestid++;const l=e.requestid,a=t?.mType,o={id:t?.id,qhcid:t?.qhcid||"",deviceid:e.deviceID,istop:t?.istop||2,sort:t?.sort||1,isautorsp:t?.isautorsp||6,content:t?.content||""};console.log("添加快捷语请求--",o);const n=i.verify(o);if(n)throw new Error(n);const c=i.encode(i.create(o)).finish(),d=s(a,l,c);D.sendMessageHandler(d)},sendShortcutCateList:t=>{const i=e.root.lookupType("QuickPhrasesCModifyReq");e.requestid++;const l=e.requestid,a=t?.mType,o={deviceid:e.deviceID,id:t?.id,sort:t?.sort||1,title:t?.title||""};console.log("添加快捷语分类请求--",a,o);const n=i.verify(o);if(n)throw new Error(n);const c=i.encode(i.create(o)).finish(),d=s(a,l,c);D.sendMessageHandler(d)}}})(h);let R=r(0);const A=r(!1),O=p((()=>{Le.value=h.shortCutTyptList[0]?.id,console.log("shortCutTyptList",h.shortCutTyptList);let e=[...h.shortCutTyptList];return e.unshift({title:"全部",id:"0"}),e})),$=p((()=>{let e=[];return e=h.shortCutTyptList.map((e=>({label:e.title,value:e.id}))),e})),Le=V({value:0}),xe=e=>{Le.value=e},Te=r("");let Ve=r(h.quickPhrasesList||[]);z((()=>h.quickPhrasesList),(e=>{e.length&&(Ve.value=e)}));const Ie=r(0),ze=()=>{const e={content:Te.value,mType:16,qhcid:Le.value,istop:2,isautorsp:2};e.content||s.fail("内容不能为空"),Ve.value.unshift(e),Te.value=""},Se=r(""),Me=()=>{const e={title:Se.value,mType:20};e.title||s.fail("内容不能为空"),h.shortCutTyptList.unshift(e),Se.value=""},Ue=r(!1),Pe=p((()=>[{title:u("类别"),key:"type",size:"x"},{title:u("快捷语数量"),key:"count",size:"s"},{title:u("操作"),key:"options",size:"s"}])),je=()=>{console.log()},Ee=p((()=>[{title:u("类型"),key:"type",size:"s"},{title:u("快捷语"),key:"text",size:"x"},{title:u("置顶"),key:"top",size:"s"},{title:u("自动回复"),key:"auto_reply",size:"s"},{title:u("操作"),key:"options",size:"s"}])),De=r(!1),He=e=>{Ve.value[Ie.value].qhcid=e},Qe=async e=>{const t=Q(e,"Output");if(console.log("onMessage/Output output0 ",t),h.messageType=t.type,t.code>1e4)alert(t.message);else switch(t.type){case 23:C(t);break;case 19:x(t)}};return v((async()=>{h.root=await H.load("/connect.ext.proto"),D.resgisterHandler(Qe),w(),T()})),(e,t)=>{const s=c,r=i,p=n,v=o,C=a,w=l,x=j("shrink-on-click");return y(),m("div",J,[k("div",N,[k("div",Y,[k("div",G,[S(s,{class:"scroll-view","scroll-x":!0,style:{width:"100%","white-space":"nowrap",display:"flex"}},{default:M((()=>[(y(!0),m(b,null,q(O.value,((e,t)=>(y(),m("view",{class:L(["item",_(R)==t?"active":""]),key:t,onClick:e=>(e=>{R.value=e})(t)},g(e.title),11,K)))),128))])),_:1})]),k("div",W,[k("img",{class:"item_img",src:d,alt:"",onClick:t[0]||(t[0]=e=>A.value=!A.value)})])]),k("div",X,[Z,k("div",ee,[k("div",te,[S(r,{modelValue:Te.value,"onUpdate:modelValue":t[1]||(t[1]=e=>Te.value=e),placeholder:"请输入添加快捷语～"},{left:M((()=>[k("div",se,[S(B,{onChange:xe,active:Le.value,options:$.value},null,8,["active","options"])])])),_:1},8,["modelValue"])]),f((y(),U(p,{height:"37px",width:"80px",class:"btn",onClick:ze},{default:M((()=>[E("添加")])),_:1})),[[x]])])]),k("div",ie,[k("div",le,[k("div",ae,[(y(!0),m(b,null,q(Ee.value,((e,t)=>(y(),m(b,{key:t},[0!=t?(y(),m("div",oe)):P("",!0),k("div",{class:L(["td","td-"+e.size])},g(e.title),3)],64)))),128))]),k("div",ne,[(y(!0),m(b,null,q(_(Ve),((e,t)=>(y(),m("div",{class:"tr",key:t},[(y(!0),m(b,null,q(Ee.value,((s,i)=>(y(),m(b,{key:s.key},[ce,k("div",{class:L(["td shorcut_list_td","td-"+s.size]),onClick:e=>(e=>{Ie.value=e,console.log("rowindex",e)})(t)},[0===i?(y(),U(B,{key:0,onChange:He,active:e.qhcid,options:$.value},null,8,["active","options"])):P("",!0),1===i?(y(),U(r,{key:1,modelValue:e.content,"onUpdate:modelValue":t=>e.content=t,placeholder:"点击此处修改快捷语"},null,8,["modelValue","onUpdate:modelValue"])):P("",!0),2===i?(y(),U(v,{key:2,modelValue:e.istop,"onUpdate:modelValue":t=>e.istop=t,"active-value":1,"inactive-value":2,"inactive-color":"#130a34","active-color":"#1DAC77"},null,8,["modelValue","onUpdate:modelValue"])):P("",!0),3===i?(y(),U(v,{key:3,modelValue:e.isautorsp,"onUpdate:modelValue":t=>e.isautorsp=t,"active-value":1,"inactive-value":2,"inactive-color":"#130a34","active-color":"#1DAC77"},null,8,["modelValue","onUpdate:modelValue"])):P("",!0),4===i?(y(),m("div",ue,"删除")):P("",!0)],10,de)],64)))),128))])))),128)),De.value||_(Ve)?.length?P("",!0):(y(),U(C,{key:0,description:_(u)("nomore_data")},null,8,["description"]))])]),k("div",re,[f((y(),U(p,{height:"38px",width:"156px",class:"submit edit",onClick:je},{default:M((()=>[E("修改")])),_:1})),[[x]]),f((y(),U(p,{height:"38px",width:"156px",class:"submit",onClick:je},{default:M((()=>[E("保存")])),_:1})),[[x]])])])]),S(w,{visible:A.value,"onUpdate:visible":t[3]||(t[3]=e=>A.value=e),title:e.$t("类别管理")},{default:M((()=>[k("div",pe,[k("div",ve,[k("div",he,[ye,k("div",me,[S(r,{modelValue:Se.value,"onUpdate:modelValue":t[2]||(t[2]=e=>Se.value=e),placeholder:"请输入添加类别名称"},null,8,["modelValue"])]),f((y(),U(p,{height:"27px",width:"68px",class:"btn",onClick:Me},{default:M((()=>[E("添加")])),_:1})),[[x]])]),k("div",ke,[k("div",ge,[(y(!0),m(b,null,q(Pe.value,((e,t)=>(y(),m(b,{key:t},[0!=t?(y(),m("div",_e)):P("",!0),k("div",{class:L(["td","td-"+e.size])},g(e.title),3)],64)))),128))]),k("div",fe,[(y(!0),m(b,null,q(h.shortCutTyptList,((e,t)=>(y(),m("div",{class:"tr",key:t},[(y(!0),m(b,null,q(Pe.value,((s,i)=>(y(),m(b,{key:s.key},[Ce,k("div",{class:L(["td","td-"+s.size])},[0===i?(y(),U(r,{key:0,modelValue:e.title,"onUpdate:modelValue":t=>e.title=t,placeholder:"点击此处修改快捷语"},null,8,["modelValue","onUpdate:modelValue"])):P("",!0),1===i?(y(),m("div",be,g(e.num),1)):P("",!0),2===i?(y(),m("div",{key:2,style:{color:"brown"},onClick:e=>(e=>{h.shortCutTyptList.splice(e,1)})(t)},"删除",8,qe)):P("",!0)],2)],64)))),128))])))),128)),Ue.value||h.shortCutTyptList.length?P("",!0):(y(),U(C,{key:0,description:_(u)("nomore_data")},null,8,["description"]))])]),k("div",we,[f((y(),U(p,{height:"38px",width:"156px",class:"submit",onClick:je},{default:M((()=>[E("保存")])),_:1})),[[x]])])])])])),_:1},8,["visible","title"])])}}}),xe=t(Le,[["__scopeId","data-v-4ca9f6b9"]]);export{xe as default};