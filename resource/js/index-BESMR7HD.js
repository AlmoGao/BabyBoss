import{_ as t,c as e,D as o,L as n,b as s}from"./index-30tzVDQE.js";import{H as r,s as a,I as i,a5 as l,Q as c,o as u,e as d,r as y,d as f,a0 as p,X as h,B as m,m as x,j as g,g as b,q as v}from"./vue-DH2RNpQ3.js";const{create:P}=e("drag");const T=t(P({props:{attract:{type:Boolean,default:!1},direction:{type:String,default:"all"},boundary:{type:Object,default:()=>({top:0,left:0,right:0,bottom:0})}},setup(t){const e=r(),n=a({keepAlive:!1,elWidth:0,elHeight:0,screenWidth:0,screenHeight:0,startTop:0,startLeft:0,nx:0,ny:0,xPum:0,yPum:0,position:{x:0,y:0},boundary:{top:0,left:0,right:0,bottom:0}});function s(t){n.boundary.left?+t.style.left.split("px")[0]>n.boundary.left?(t.style.left=+t.style.left.split("px")[0]-10+"px",o((()=>{s(t)}))):t.style.left=`${n.boundary.left}px`:+t.style.left.split("px")[0]>10?(t.style.left=+t.style.left.split("px")[0]-10+"px",o((()=>{s(t)}))):t.style.left="0px"}function u(t,e){e-parseInt(t.style.left.split("px")[0])>10?(t.style.left=parseInt(t.style.left.split("px")[0])+10+"px",o((()=>{u(t,e)}))):t.style.left=e+"px"}function d(e){e.preventDefault();const o=e.currentTarget;if(1===e.targetTouches.length){const s=e.targetTouches[0];n.nx=s.clientX-n.position.x,n.ny=s.clientY-n.position.y,n.xPum=n.startLeft+n.nx,n.yPum=n.startTop+n.ny;const r=n.screenWidth-n.elWidth-n.boundary.right;Math.abs(n.xPum)>r?n.xPum=r:n.xPum<=n.boundary.left&&(n.xPum=n.boundary.left),n.yPum<n.boundary.top?n.yPum=n.boundary.top:n.yPum>n.screenHeight-n.elHeight-n.boundary.bottom&&(n.yPum=n.screenHeight-n.elHeight-n.boundary.bottom),"y"!=t.direction&&(o.style.left=n.xPum+"px"),"x"!=t.direction&&(o.style.top=n.yPum+"px")}}function y(e){const r=e.currentTarget;let a=e.changedTouches[0].clientX;const i=n.screenWidth-n.elWidth-n.boundary.right;a=a>i?i:a<n.boundary.left||a<n.screenWidth/2?n.boundary.left:i,"y"!=t.direction&&t.attract&&(a<n.screenWidth/2?o((()=>{s(r)})):o((()=>{u(r,i)}))),"x"!=t.direction&&(r.style.top=n.yPum+"px")}function f(t){const e=t.currentTarget,o=t.touches[0],s=t.targetTouches[0];n.startTop=e.offsetTop,n.startLeft=e.offsetLeft,n.position.x=o.clientX,n.position.y=o.clientY,n.nx=s.clientX-n.position.x,n.ny=s.clientY-n.position.y,n.xPum=n.startLeft+n.nx,n.yPum=n.startTop+n.ny}return i((()=>{!function(){const t=document.documentElement;n.elWidth=e.value.offsetWidth,n.elHeight=e.value.offsetHeight,n.screenWidth=t.clientWidth||375,n.screenHeight=t.clientHeight||667}(),n.boundary=t.boundary})),l((()=>{n.keepAlive&&(n.keepAlive=!1)})),c((()=>{n.keepAlive=!0,e.value.removeEventListener("touchstart",f),e.value.removeEventListener("touchmove",d),e.value.removeEventListener("touchend",y)})),{myDrag:e,touchStart:f,touchMove:d,touchEnd:y}}}),[["render",function(t,e,o,n,s,r){return u(),d("view",{ref:"myDrag",class:"nut-drag",onTouchstart:e[0]||(e[0]=e=>t.touchStart(e)),onTouchmove:e[1]||(e[1]=e=>t.touchMove(e)),onTouchend:e[2]||(e[2]=e=>t.touchEnd(e))},[y(t.$slots,"default")],544)}]]),W={class:"iframe_box"},H=["src"],L=s(f({__name:"index",setup(t){const e=p(),o=h(),s=a({src:"",left:"",top:"",rlen:history.length,offset:{x:window.innerWidth-100,y:45}}),r=()=>{let t=s.rlen-history.length-1;e.go(t)};return i((()=>{o.query.screenOrientation,s.src=n.get("gameUrl")})),(t,e)=>{const o=T;return u(),d("div",W,[m(o,{class:"drag",attract:"",boundary:{top:0,left:0,bottom:20,right:30}},{default:x((()=>[b("iconpark-icon",{name:"hoticonhbwvmun01",size:"30",onClick:v(r,["stop"])})])),_:1}),s.src?(u(),d("iframe",{key:0,id:"iframeId",src:s.src,frameborder:"0",scrolling:"auto"},null,8,H)):g("",!0)])}}}),[["__scopeId","data-v-ef1773da"]]);export{L as default};