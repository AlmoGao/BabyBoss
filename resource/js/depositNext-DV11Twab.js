import{v as e,L as a,M as l,N as t,q as s,e as o,f as n,s as i,O as u,R as r,Q as d,t as c,b as p}from"./index-30tzVDQE.js";import{i as m,a as v}from"./index-DPr-pNgQ.js";import{d as _,H as g,x as h,I as b,G as f,e as y,g as k,B as w,m as x,p as C,v as D,t as B,i as N,o as j,j as M,a as T,l as O,F as R,S as V,_ as q,$ as A}from"./vue-DH2RNpQ3.js";import{c as E}from"./chooseBankDialog-DCdFUwvW.js";const I={class:"deposit_sm_modal"},W={class:"body vertical center body_sec"},z={class:"flex choose_bank"},U={class:"flex align_center choose_bank_l bank_way",style:{width:"100%","background-image":"url(/imgs/payment/inputBgFull.webp)"}},S={class:"bank_cicon"},$=["src"],F={class:"bank_cname"},G={class:"select_dis"},L={key:0,class:"choose_yh"},X={class:"select_dis"},H={class:"flex choose_bank"},K={class:"flex align_center choose_bank_l"},Q={key:0,class:"bank_cicon"},J=["src","alt"],P={class:"bank_cname"},Y={key:0,class:"flex usdt_box"},Z={class:"flex f_wrap kjje_div"},ee=["onClick"],ae={class:"btn_zone flex"},le={class:"cz_tips r_color"},te={class:"flex align_center justify_center tip"},se=(e=>(q("data-v-51e86ab4"),e=e(),A(),e))((()=>k("span",{class:"icon"},null,-1))),oe={class:"popup_body"},ne={class:"form_card"},ie={class:"form_container vertical"},ue={class:"body flex"},re=["onClick"],de={class:"icon"},ce=["src"],pe=_({__name:"depositNext",setup(p){const{t:_}=e.useI18n(),q=g(),A=g(a.get("depositWayObj")?.legalRecharge||[]),pe=a.get("curDepositWay"),me=a.get("curDiscountData")||{id:0},ve=g(pe),_e=g({limit:0,ratio:0,require:0,restrict:"",threshold:0}),ge=g({rate:26540}),he=g({show:!1,mon:0}),be=g({method:-1,discount:0,amount:"",bank:null,bankMethod:100,network_type:""}),fe={label:_("addBank_page_pChoose"),value:-1,minrecharge:0,maxrecharge:0,paymethod:""},ye=g(a.get("depositWayObj")?.mtdList||[{...fe}]),ke={text:_("deposit_page_notOffer"),value:0,limit:999999},we=g([{...ke}]),xe=g([]),Ce=g(!1),De=[{label:"100,000",value:1e5},{label:"200,000",value:2e5},{label:"500,000",value:5e5},{label:"1,000,000",value:1e6},{label:"10,000,000",value:1e7},{label:"100,000,000",value:1e8}],Be=g({label:"",value:""}),Ne=[{text:_("deposit_page_chooseNetWork"),value:""},{text:"TRC20",value:1},{text:"ERC20",value:2}],je=g(!1),Me=[{label:"Binance",value:"https://www.binance.com/vi/price/tether/VND"},{label:"Coinbase",value:"https://www.coinbase.com/zh-cn/converter"},{label:"Gate.io",value:"https://www.gate.io/zh/crypto/buy?crypto=USDT&fiat=vnd"},{label:"Bybit",value:"https://www.bybit.com/fiat/trade/express/home"},{label:"OKX",value:"https://www.okx.com/zh-hans/price/tether-usdt"},{label:"HTX",value:"https://www.htx.com/zh-cn/fiat-crypto/one-trade/buy-usdt-vnd"}],Te=()=>{if(!ge.value.rate)return;return(Number(be.value.amount)/ge.value.rate).toFixed(2)},Oe=e=>{console.log("----999",e),be.value.discount=e},Re=e=>{be.value.discount=me?.id,be.value.method=ve.value.paymenttype,ge.value.rate=e.usdt_viet_rate,xe.value=e.discount_list.filter((e=>e.limit)),xe.value.forEach((e=>we.value.push({text:e.name,value:e.discount_ID})))},Ve=()=>{if(A.value.find((e=>e.paymenttype===be.value.method))?.payname.indexOf("bankcard")>-1&&!be.value.bank)return i.fail(_("paymentManagement_page_chBank"));if(A.value.find((e=>e.paymenttype===be.value.method))?.payname.indexOf("usdt")>-1&&!be.value.network_type)return i.fail(_("deposit_page_pleChooseNetWork"));const e=ye.value.find((e=>e.value===be.value.method));if(console.log("&&&&&",e),"usdt"===e.payname){if(he.value={show:!0,mon:Number(e.minrecharge)*ge.value.rate},Number(be.value.amount)<Number(e.minrecharge)*ge.value.rate)return i.fail(_("deposit_page_minAmount",{minAmount:e.minrecharge}));if(Number(be.value.amount)>Number(e.maxrecharge)*ge.value.rate)return i.fail(_("deposit_page_maxAmount",{maxAmount:e.maxrecharge}))}else{if(he.value={show:!0,mon:e.minrecharge},be.value.amount<e.minrecharge)return i.fail(_("deposit_page_minAmount",{minAmount:e.minrecharge}));if(be.value.amount>e.maxrecharge)return i.fail(_("deposit_page_maxAmount",{maxAmount:e.maxrecharge}))}he.value.show=!1,qe()},qe=()=>{Ce.value=!0;const e=o.req_recharge_from_third();e.amount=be.value.amount,e.channel_type=be.value.method,e.bank_channel_type=3,e.type=be.value.bankMethod,e.got_discount=be.value.discount,e.network_type=be.value.network_type,console.log("=======充值提交参数",e),n.instance.sendRequest(e)},Ae=e=>{console.log("---",e),Ce.value=!1,-1===e.code?i.fail(_(e.msg)):(be.value.amount="",a.remove("curDiscountData"),(e.url.indexOf("http")>-1||e.url.indexOf("https")>-1)&&setTimeout((()=>{window.open(e.url)}),2e3))},Ee=()=>{q.value.onCloseBank()},Ie=e=>{be.value.bank=e.value,Be.value=e};return h((()=>be.value.discount),(e=>{_e.value=xe.value.find((a=>a.discount_ID===e))})),b((()=>{setTimeout((()=>{(()=>{const e=o.req_get_shop_info();n.instance.sendRequest(e)})()}),600),l.addMsgEvent(t.msgType.msg_notify_req_get_shop_info,Re),l.addMsgEvent(t.msgType.msg_notify_recharge_from_third,Ae)})),f((()=>{a.remove("curDiscountData"),l.removeMsgEvent(t.msgType.msg_notify_req_get_shop_info,null),l.removeMsgEvent(t.msgType.msg_notify_recharge_from_third,null)})),(e,a)=>{const l=d,t=m,o=v,n=u,i=c,p=r;return j(),y("div",I,[k("div",W,[w(p,{"label-position":"top",ref:"formRef",class:""},{default:x((()=>[w(l,{label:N(_)("rechargeRecord_page_method")},{default:x((()=>[k("div",z,[k("div",U,[k("span",S,[k("img",{src:`/imgs/payment/icon/icon_${ve.value.payname}.webp`},null,8,$)]),k("span",F,B(N(_)(`api_${ve.value.payname}`)),1)])])])),_:1},8,["label"]),w(l,{class:"yh_item",label:N(_)("deposit_page_discount")},{default:x((()=>[k("div",G,[w(o,null,{default:x((()=>[w(t,{modelValue:be.value.discount,"onUpdate:modelValue":a[0]||(a[0]=e=>be.value.discount=e),options:we.value,onChange:Oe},null,8,["modelValue","options"])])),_:1})]),be.value.discount?(j(),y("div",L,[k("div",null,B(N(_)("deposit_page_upperLimit"))+"："+B(_e.value.limit),1),k("div",null,B(N(_)("deposit_page_giftRatio"))+"："+B(_e.value.ratio)+"%",1),k("div",null,B(N(_)("deposit_page_multiple"))+"："+B(_e.value.require)+"X",1),k("div",null,B(N(_)("deposit_page_minimum"))+"："+B(_e.value.threshold),1),k("div",null,B(N(_)("deposit_page_venues"))+"："+B(_e.value.restrict),1)])):M("",!0)])),_:1},8,["label"]),["usdt"].includes(ve.value.payname)?(j(),T(l,{key:0,class:"yh_item",label:N(_)("deposit_page_netWork")},{default:x((()=>[k("div",X,[w(o,null,{default:x((()=>[w(t,{modelValue:be.value.network_type,"onUpdate:modelValue":a[1]||(a[1]=e=>be.value.network_type=e),options:Ne},null,8,["modelValue"])])),_:1})])])),_:1},8,["label"])):M("",!0),ve.value.payname.indexOf("bankcard")>-1?(j(),T(l,{key:1,label:N(_)("addBank_page_pChooseBank")},{default:x((()=>[k("div",H,[k("div",K,[Be.value.value?(j(),y("span",Q,[k("img",{src:`/imgs/bankIcon/bank_logo_${Be.value.value}.webp`,alt:Be.value.label},null,8,J)])):M("",!0),k("span",P,B(Be.value.label),1)]),w(n,{bordered:!1,class:"change_btn",onClick:Ee},{default:x((()=>[O(B(N(_)("deposit_page_changeWay")),1)])),_:1})])])),_:1},8,["label"])):M("",!0),w(l,{label:N(_)("rechargeRecord_page_amount")},{default:x((()=>[w(i,{modelValue:be.value.amount,"onUpdate:modelValue":a[3]||(a[3]=e=>be.value.amount=e),modelModifiers:{trim:!0},placeholder:N(_)("deposit_page_enterMon")},{right:x((()=>[k("a",{class:"refresh_icon",onClick:a[2]||(a[2]=e=>be.value.amount="")})])),_:1},8,["modelValue","placeholder"]),["usdt"].includes(ve.value.payname)?(j(),y("div",Y,[k("span",null,"USDT: "+B(Te()),1),k("span",{class:"button",onClick:a[4]||(a[4]=e=>je.value=!0)},B(N(_)("deposit_page_toExchange")),1)])):M("",!0),C(k("p",{class:"r_color"},B(N(_)("deposit_page_minDeposit"))+": "+B(he.value.mon),513),[[D,he.value.show]])])),_:1},8,["label"]),k("div",Z,[(j(),y(R,null,V(De,((e,a)=>k("a",{class:"kj_item",onClick:a=>{return l=e.value,void(be.value.amount=l.toString());var l},key:a},B(e.label),9,ee))),64))])])),_:1},512),k("div",ae,[w(n,{class:"submit_btn weight_5 center pointer",disabled:Ce.value,block:"",onClick:Ve},{default:x((()=>[O(B(N(_)("deposit_page_rechargeNow")),1)])),_:1},8,["disabled"])]),k("div",le,[C(k("div",{class:"txt"},B(N(_)("deposit_page_arrival"))+"："+B(be.value.amount),513),[[D,Number(be.value.amount)>0]]),k("div",te,[se,k("span",null,B(N(_)("deposit_page_depositTips")),1)])])]),w(E,{ref_key:"chooseBankModal",ref:q,isDepositBank:!0,onSelectBank:Ie},null,512),w(s,{visible:je.value,"onUpdate:visible":a[5]||(a[5]=e=>je.value=e),title:N(_)("deposit_page_exchange")},{default:x((()=>[k("div",oe,[k("div",ne,[k("div",ie,[k("div",ue,[(j(),y(R,null,V(Me,((e,a)=>k("div",{class:"ex_list_item",key:a,onClick:a=>{return l=e.value,void window.open(l);var l}},[k("div",de,[k("img",{src:`/imgs/payment/usdt/logo${a+1}.webp`},null,8,ce)]),k("span",null,B(e.label),1)],8,re))),64))])])])])])),_:1},8,["visible","title"])])}}}),me=p(pe,[["__scopeId","data-v-51e86ab4"]]);export{me as default};