import{v as e,M as t,N as a,A as s,e as l,f as i}from"./index-30tzVDQE.js";import{S as _,P as n,g as o,i as m,t as r,b as p}from"./timeData-D1QiY_GD.js";import{_ as c}from"./index-B7umTcYS.js";import{d,b as u,H as g,s as v,G as y,e as b,g as f,a as h,i as k,F as j,S as T,B as M,m as R,o as z,j as L,n as V,t as x}from"./vue-DH2RNpQ3.js";import"./index-BvmDLUYP-ZbkWU4Li.js";const D={class:"page_record page_bet_record"},E={class:"search_box"},F={class:"search_item search_item_mini"},O={class:"search_item search_item_mini"},S={class:"search_item search_item_mini"},q={class:"table"},N={class:"th"},C={key:0,class:"line"},H=f("div",{class:"line"},null,-1),U=["innerHTML"],w=d({__name:"betRecord",setup(d){const{t:w}=e.useI18n(),A=u((()=>[{title:w("betRecord_page_platform"),key:"platform_id",size:"m"},{title:w("betRecord_page_game"),key:"game_type",size:"m"},{title:w("betRecord_page_betAmount"),key:"bet_total",size:"m"},{title:w("betRecord_page_winLose"),key:"net_value",size:"m"},{title:w("betRecord_page_settlement"),key:"balance_time",size:"m"}])),B=g([]),P=u((()=>{const e=B.value;return e.unshift({value:0,label:w("promo_page_all")}),e})),$=g([]),G=u((()=>{const e=$.value;return e.unshift({value:0,label:w("promo_page_all")}),e})),I=v({page:1,platform_id:0,game_type:0,play_type:0}),Y=v({total_page:0,list:[]}),J=g(!1),K=(e,t)=>{let a="",l=e.game_type.split("_"),i=e[t];switch(t){case"platform_id":a=l[0];break;case"bet_total":a=Math.abs(i).toLocaleString();break;case"net_value":a=`<span style="color:${Number(i)>0?"#80FF44":"#FF2424"}">${Number(i).toLocaleString()}</span>`;break;case"balance_time":a=s(i);break;default:a=w(e.platform_id+"_"+l[1])}return a},Q=e=>{I.time=e,Object.assign(I,o(e)),Z()},W=e=>{I.platform_id=e,Z()},X=e=>{I.game_type=e,Z()},Z=()=>{Y.total_page=0,Y.list=[],I.page=1,setTimeout((()=>{ee()}),0)},ee=()=>{const e=l.req_get_bet_record_list();I.start_time.month=6,I.end_time.month=6,I.start_time.day=1,I.end_time.day=30,Object.assign(e.start_time,I.start_time),Object.assign(e.end_time,I.end_time),e.page_num=I.page,e.platform_id=I.platform_id,e.game_type=I.game_type.toString(),e.play_type=I.play_type,J.value=!0,i.instance.sendRequest(e),setTimeout((()=>{te()}),300)},te=()=>{const e=l.req_platform_gametype_list();Object.assign(e.start_time,I.start_time),Object.assign(e.end_time,I.end_time),i.instance.sendRequest(e)};setTimeout((()=>{te()}),500),t.addMsgEvent(a.msgType.msg_notify_get_bet_record_list,(e=>{setTimeout((()=>{J.value=!1}),300),Y.total_page=e.total_pages||0,Y.list=Y.list.concat(e.bet_record_list||[]).sort(((e,t)=>Date.parse(s(t.balance_time))-Date.parse(s(e.balance_time))))})),t.addMsgEvent(a.msgType.msg_notify_platform_gametype_list,(e=>{B.value=e.plat_rec_list.map((e=>({value:Number(e),label:n[e]}))),$.value=e.gtype_rec_list.map((e=>{let t=e;try{t=n[e.split("_")[0]]+"_"+e.split("_")[1]}catch{}return{value:e,label:w(t)}}))})),y((()=>{t.removeMsgEvent(a.msgType.msg_notify_get_bet_record_list,null),t.removeMsgEvent(a.msgType.msg_notify_platform_gametype_list,null)})),Q(1);const ae=()=>{if(Y.total_page<=Y.list.length)return J.value=!1;I.page++,ee()},se=()=>{Z()};return(e,t)=>{const a=c,s=p,l=m;return z(),b("div",D,[f("div",E,[f("div",F,[(z(),h(_,{key:1,onChange:W,active:I.platform_id,options:P.value},null,8,["active","options"]))]),f("div",O,[(z(),h(_,{key:2,onChange:X,active:I.game_type,options:G.value},null,8,["active","options"]))]),f("div",S,[(z(),h(_,{key:3,onChange:Q,active:I.time,options:k(r)},null,8,["active","options"]))])]),f("div",q,[f("div",N,[(z(!0),b(j,null,T(A.value,((e,t)=>(z(),b(j,{key:t},[0!=t?(z(),b("div",C)):L("",!0),f("div",{class:V(["td","td-"+e.size])},x(e.title),3)],64)))),128))]),M(l,{class:"main_content",modelValue:J.value,"onUpdate:modelValue":t[1]||(t[1]=e=>J.value=e),onLoadMore:ae},{default:R((()=>[M(s,{modelValue:J.value,"onUpdate:modelValue":t[0]||(t[0]=e=>J.value=e),onRefresh:se},{default:R((()=>[(z(!0),b(j,null,T(Y.list,((e,t)=>(z(),b("div",{class:"tr",key:t},[(z(!0),b(j,null,T(A.value,(t=>(z(),b(j,{key:t.key},[H,f("div",{class:V(["td","td-"+t.size]),innerHTML:K(e,t.key)},null,10,U)],64)))),128))])))),128)),J.value||Y.list.length?L("",!0):(z(),h(a,{key:0,description:k(w)("nomore_data")},null,8,["description"]))])),_:1},8,["modelValue"])])),_:1},8,["modelValue"])])])}}});export{w as default};