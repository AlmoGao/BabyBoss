const __vite__fileDeps=["resource/js/index-30tzVDQE.js","resource/js/vue-DH2RNpQ3.js","resource/css/index-CvaekODU.css"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{v as e,U as a,d as o,M as t,N as s,e as r,f as m,a2 as i,L as n,X as l,u as _,x as d,T as p,V as c,W as h,S as w,a3 as g,a4 as f,a5 as u,a6 as b,a7 as y,a8 as P,b as v}from"./index-30tzVDQE.js";import{d as D,H as x,W as C,s as I,I as j,G as T,e as N,F as R,S as E,B as F,i as M,o as k,g as q,t as G,j as L,a7 as V}from"./vue-DH2RNpQ3.js";const A={class:"security_settings"},S={key:0},O={key:0},H=["id","onClick"],W=v(D({__name:"index",setup(v){const{t:D}=e.useI18n(),W=V((()=>P((()=>import("./index-30tzVDQE.js").then((e=>e.ah))),__vite__mapDeps([0,1,2])))),B=a(o),U=x(),{info:X,roleInfo:z}=C(B),J=I({first:1,checkPhoneOremail:!1,params:null,type:0,formData:null,list:[{text:"home_page_name",value:"real_name",btns:[]},{text:"home_page_account",value:"full_name",btns:[],formData:{title:"home_page_modifyAccount",buttonText:"home_page_modifyNow",showLabel:!0,formParams:{account:"",operate_type:2},list:{account:{name:"account",type:"text",placeholder:"home_page_enterAccount1",label:"home_page_account",slot:!1,leftIcon:"",changeRightIcon:!1,show:!0}}},type:1},{text:"home_page_password",value:"hideString",btns:[{text:"home_page_modify",icon:"Group39376",value:1}],formData:{active:0,step:"",buttonText:"home_page_modifyNow",title:"home_page_modifyPassword",showLabel:!0,tabList:[{name:"home_page_generalModifications",value:0},{name:"home_page_modifyPhone",value:1},{name:"home_page_modifyEmail",value:2}],formParams:{operate_type:2,modify_type:1,phoneCode:"",emailCode:"",mobile:X.value.mobile?.slice(2)||"",email:X.value.email||"",old_password:"",new_password:"",new_password_confirm:"",codeValue:X.value.mobile?.slice(0,2)||""},list:{mobile:{name:"mobile",type:"text",placeholder:"home_page_enterPhoneNumber",label:"home_page_phone",slot:!1,leftIcon:!0,changeRightIcon:!1,show:!1,isMobile:!0,disabled:!!X.value.mobile},email:{name:"email",type:"text",placeholder:"home_page_enterEmail",label:"home_page_email",slot:!1,changeRightIcon:!1,show:!1,disabled:!!X.value.email},old_password:{name:"old_password",type:"password",placeholder:"home_page_enterOldPassword",label:"home_page_oldPassword",slot:!0,changeRightIcon:"wallrticontongy03",show:!0},new_password:{name:"new_password",type:"password",placeholder:"home_page_enterNewPassword",label:"home_page_newPassword",slot:!0,changeRightIcon:"wallrticontongy03",show:!0},new_password_confirm:{name:"new_password_confirm",type:"password",placeholder:"home_page_enterAgainNewPassword",label:"home_page_newPassword",slot:!0,changeRightIcon:"wallrticontongy03",show:!0},phoneCode:{name:"phoneCode",type:"code",placeholder:"home_page_enterSmsCode",label:"home_page_smsCode",slot:!0,changeRightIcon:!1,show:!1,disabled:!X.value.mobile,loading:!1,timeText:"home_page_send",timer:null,btnDisabled:!1},emailCode:{name:"emailCode",type:"code",placeholder:"home_page_enterVerificationCode",label:"home_page_verificationCode",slot:!0,changeRightIcon:!1,show:!1,disabled:!X.value.email,loading:!1,timeText:"home_page_send",timer:null,btnDisabled:!1}}},type:3},{text:"home_page_email",value:"email",btns:[{text:"home_page_bind",icon:"Group39377",value:0}],formData:{buttonText:"home_page_bindNow",title:"home_page_bindEmail",active:2,showLabel:!0,formParams:{operate_type:1,modify_type:1,verify_code:"",emailCode:"",email:""},list:{email:{name:"email",type:"text",placeholder:"home_page_enterEmail",label:"home_page_email",slot:!1,leftIcon:"Group39361-d3pmjajn",changeRightIcon:!1,show:!0},emailCode:{name:"emailCode",type:"code",placeholder:"home_page_enterVerificationCode",label:"home_page_verificationCode",slot:!0,leftIcon:"Group39363-d3pmjao6",changeRightIcon:!1,show:!0,disabled:!0,loading:!1,timeText:"home_page_send",timer:null,btnDisabled:!1}}},type:4},{text:"home_page_phone",value:"mobile",btns:[{text:"home_page_bind",icon:"Group39377",value:0}],formData:{buttonText:"home_page_bindNow",title:"home_page_bindPhone",active:1,showLabel:!0,formParams:{operate_type:3,modify_type:1,verify_code:"",mobile:"",codeValue:"84"},list:{mobile:{name:"mobile",type:"text",placeholder:"home_page_enterPhoneNumber",label:"home_page_phone",slot:!1,leftIcon:!1,changeRightIcon:!1,show:!0,isMobile:!0},phoneCode:{name:"phoneCode",type:"code",placeholder:"home_page_enterSmsCode",label:"home_page_smsCode",slot:!0,leftIcon:"Group39363-d3pmjao6",changeRightIcon:!1,show:!0,disabled:!0,loading:!1,timeText:"home_page_send",timer:null,btnDisabled:!1}}},type:5},{text:"home_page_fundPassword",value:"hideString",btns:[{text:"home_page_modify",icon:"Group39376",value:1}],formData:{buttonText:"home_page_bindNow",title:"home_page_bindFundPassword",showLabel:!0,formParams:{operate_type:1,old_withdrawPwd:"",new_withdrawPwd:"",new_withdrawPwd_confirm:""},list:{old_withdrawPwd:{name:"old_withdrawPwd",type:"password",placeholder:"home_page_enterOldPassword",label:"home_page_oldPassword",slot:!0,changeRightIcon:"wallrticontongy03",show:!1},new_withdrawPwd:{name:"new_withdrawPwd",type:"password",placeholder:"home_page_enterNewPassword",label:"home_page_newPassword",slot:!0,changeRightIcon:"wallrticontongy03",show:!0},new_withdrawPwd_confirm:{name:"new_withdrawPwd_confirm",type:"password",placeholder:"home_page_enterAgainNewPassword",label:"home_page_newPassword",slot:!0,changeRightIcon:"wallrticontongy03",show:!0}}},type:10}],currencyList:[{label:"VND",value:1}]}),K=(e,a)=>{let o=r.req_reset_account_password();1==a?(o.operate_type=1,J.checkPhoneOremail=!0):o.operate_type=2,1==J.formData.active&&(o.mobile_or_email=e.mobile,o.captcha=e.phoneCode),2==J.formData.active&&(o.mobile_or_email=e.email,o.captcha=e.emailCode),o.modify_type=e.modify_type,o.username=X.value?.full_name,o.old_password=e.old_password,o.new_password=e.new_password,o.new_password_confirm=e.new_password_confirm,m.instance.sendRequest(o)},Q=(e,a)=>{let o=r.req_can_modify_account();o.newusername=e.account,o.operate_type=2,m.instance.sendRequest(o)},Y=async(e,a)=>{let o=r.req_bind_modify_email();1==a&&(o.username=e.account),4==a&&(o.email=e.email,o.username=X.value?.full_name,o.captcha=e.emailCode),5==a&&(o.email=e.codeValue+e.mobile,o.username=X.value?.full_name,o.captcha=e.phoneCode),o.operate_type=e.operate_type,o.agent_id=z.value.id,o.aaa=_,o.bbb=d,o.ip=await p();let t=await c();o.sign=h(t),m.instance.sendRequest(o)},Z=e=>{let a=r.req_bind_or_modify_withdraw_password();a.operate_type=e.operate_type,a.old_password=e.old_withdrawPwd,a.new_password=e.new_withdrawPwd,a.role_id=z.value?.id,a.new_password_confirm=e.new_withdrawPwd_confirm,m.instance.sendRequest(a)},$=(e,a)=>{J.params=e,J.type=a,{1:Q,2:Y,3:K,4:Y,5:Y,10:Z}[a](e,a)},ee=(e,a)=>{J.formData=a,J.formData.active=e,0==J.formData.active&&(J.formData.list.old_password.show=!0,J.formData.list.new_password.show=!0,J.formData.list.new_password_confirm.show=!0,J.formData.formParams.modify_type=2,J.formData.buttonText=D("home_page_modifyNow"),J.formData.step=0),1==J.formData.active&&(J.formData.list.mobile.show=!0,J.formData.list.phoneCode.show=!0,J.formData.buttonText=D("home_page_next"),J.formData.step=1),2==J.formData.active&&(J.formData.list.email.show=!0,J.formData.list.emailCode.show=!0,J.formData.formParams.modify_type=3,J.formData.buttonText=D("home_page_next"),J.formData.step=1)},ae=e=>{K(e,1)},oe=async e=>{J.checkPhoneOremail?1==e.code&&((()=>{for(const e in J.formData.list)J.formData.list[e].show=!1})(),J.formData.buttonText="home_page_modifyNow",J.formData.step=2,J.formData.list.new_password.show=!0,J.formData.list.new_password_confirm.show=!0,J.checkPhoneOremail=!1):1==e.code&&(i.success(D(e.message)),U.value.closeDialog(),await a(o).setHasLogin(!1),n.remove("user"),location.href="/")},te=e=>{1==e.code&&(i.success(D(e.message)),l(),setTimeout((()=>{U.value.closeDialog()}),2e3))},se=e=>{let a=J.list.find((e=>10==e.type));1==e.code&&(a.formData.formParams.operate_type=2,a.btns=[{text:"home_page_modify",icon:"Group39376",value:1}],a.formData.list.old_withdrawPwd.show=!0,a.formData.title="home_page_changeFundPassword",a.formData.buttonText="home_page_modifyNow"),2==e.code&&(a.formData.formParams.operate_type=1,a.btns=[{text:"home_page_bind",icon:"Group39377",value:2}],a.formData.list.old_withdrawPwd.show=!1,a.formData.title="home_page_bindFundPassword",a.formData.buttonText="home_page_bindNow")},re=e=>{if(1==J.first){let a=J.list.find((e=>1==e.type));1==e.code?(a.btns=[{text:"home_page_modify",icon:"Group39376",value:1}],J.first=2):a.btns=[]}else 1==e.code&&Y(J.params,1)},me=e=>{1==e.code&&(i.success(D(e.message)),l(),setTimeout((()=>{U.value.closeDialog()}),2e3))};return j((async()=>{t.addMsgEvent(s.msgType.msg_notify_open_or_close_withdraw_password,se),t.addMsgEvent(s.msgType.msg_notify_can_modify_account,re),t.addMsgEvent(s.msgType.msg_notify_bind_or_modify_withdraw_password,me),t.addMsgEvent(s.msgType.msg_notify_bind_modify_email,te),t.addMsgEvent(s.msgType.msg_notify_reset_account_password,oe);let e=J.list.find((e=>4==e.type)),a=J.list.find((e=>5==e.type));X.value?.mobile&&(a.btns=[]),X.value?.email&&(e.btns=[]),(()=>{const e=r.req_can_modify_account();e.newusername=X.value?.real_name||"",e.operate_type=1,m.instance.sendRequest(e)})(),(()=>{const e=r.req_open_or_close_withdraw_password();e.operate_type=4,e.role_id=z.value?.id,m.instance.sendRequest(e)})()})),T((()=>{t.removeMsgEvent(s.msgType.msg_notify_can_modify_account,null),t.removeMsgEvent(s.msgType.msg_notify_bind_modify_email,null),t.removeMsgEvent(s.msgType.msg_notify_open_or_close_withdraw_password,null),t.removeMsgEvent(s.msgType.msg_notify_reset_account_password,null)})),(e,a)=>(k(),N("div",A,[(k(!0),N(R,null,E(J.list,((e,a)=>(k(),N("div",{class:"items",key:a},[q("span",null,G(M(D)(e.text)),1),e.btns?(k(),N("div",S,[q("span",null,G(M(X)[e.value]),1),e.btns.length>0?(k(),N("div",O,[(k(!0),N(R,null,E(e.btns,((a,o)=>(k(),N("span",{class:"bind_btn btn_block",id:e.text,key:o,onClick:a=>(e=>{let a={mobile:[{validator:e=>(console.log(e),e?w(J.formData.formParams.codeValue,e)?(J.formData.list.phoneCode.disabled=!1,Promise.resolve()):(J.formData.list.phoneCode.disabled=!0,Promise.reject(D("home_page_phoneNumberFormatIncorrect"))):Promise.reject(D("home_page_enterPhoneNumber")))}],verify_code:[{validator:e=>e?g(e)?Promise.resolve():Promise.reject(D("home_page_verificationCodeFormatIncorrect")):Promise.reject(D("home_page_enterVerificationCode"))}],email:[{validator:e=>e?f(J.formData.formParams.email)?(J.formData.list.emailCode.disabled=!1,Promise.resolve()):(J.formData.list.emailCode.disabled=!0,Promise.reject(D("home_page_emailIncorrect"))):Promise.reject(D("home_page_enterEmail"))}],old_password:[{validator:e=>e?u(e)?Promise.resolve():Promise.reject(D("home_page_passwordFormatIncorrect")):Promise.reject(D("home_page_enterPassword"))}],new_password:[{validator:e=>e?u(e)?Promise.resolve():Promise.reject(D("home_page_passwordFormatIncorrect")):Promise.reject(D("home_page_enterPassword"))}],new_password_confirm:[{validator:e=>e?e!=J.formData.formParams.new_password?Promise.reject(D("home_page_passwordsInconsistent")):Promise.resolve():Promise.reject(D("home_page_enterAgainNewPassword"))}],old_withdrawPwd:[{validator:e=>e?b(e)?Promise.resolve():Promise.reject(D("home_page_passwordFormatIncorrect")):Promise.reject(D("home_page_enterOldPassword"))}],new_withdrawPwd:[{validator:e=>e?b(e)?Promise.resolve():Promise.reject(D("home_page_passwordFormatIncorrect")):Promise.reject(D("home_page_enterAgainNewPassword"))}],new_withdrawPwd_confirm:[{validator:e=>e?e!=J.formData.formParams.new_withdrawPwd?Promise.reject(D("home_page_passwordsInconsistent")):Promise.resolve():Promise.reject(D("home_page_enterAgainNewPassword"))}],phoneCode:[{validator:e=>e?y(e)?Promise.resolve():Promise.reject(D("home_page_smsCodeFormatIncorrect")):Promise.reject(D("home_page_enterSmsCode"))}],emailCode:[{validator:e=>e?g(e)?Promise.resolve():Promise.reject(D("home_page_smsCodeFormatIncorrect")):Promise.reject(D("home_page_enterSmsCode"))}],account:[{validator:e=>e?u(e)?Promise.resolve():Promise.reject(D("home_page_accountFormatIncorrect")):Promise.reject(D("home_page_enterAccount1"))}]};e.formData.rules=a,J.formData=e.formData,U.value.openDialog(e.formData,e.type)})(e)},G(M(D)(a.text)),9,H)))),128))])):L("",!0)])):L("",!0)])))),128)),F(M(W),{ref_key:"FormRef",ref:U,onNextChange:ae,onChangeTab:ee,onSubmitData:$},null,512)]))}}),[["__scopeId","data-v-1584c2d3"]]);export{W as default};